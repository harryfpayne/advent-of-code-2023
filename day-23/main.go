package main

import (
	"fmt"
	"github.com/harryfpayne/advent-of-code-2023/day-23/pq"
	"strings"
	"time"
)

func main() {
	s := time.Now()
	grid, start, end := Parse(PUZZLE)
	nodes := NodesFromGrid(grid, start)

	q := pq.NewPriorityQueue(
		QueueItem{Position: start, Steps: 0, VisitHistory: make(map[Position]int)},
	)

	m := 0
	for q.Len() > 0 {
		item := q.Pop()

		if item.Position == end {
			if item.Steps > m {
				fmt.Println(time.Since(s), "Reached end in ", item.Steps)
				m = item.Steps
			}
			continue
		}

		node := nodes[item.Position]
		for _, edge := range node.Edges {
			if _, ok := item.VisitHistory[edge.To]; ok { // I've been here before
				continue
			}

			nextHistory := Copy(item.VisitHistory)
			nextHistory[item.Position] = len(item.VisitHistory)
			q.Push(QueueItem{
				Position:     edge.To,
				Steps:        item.Steps + edge.Distance,
				VisitHistory: nextHistory,
			})
		}
	}
}

func Copy(m map[Position]int) map[Position]int {
	c := make(map[Position]int)
	for k, v := range m {
		c[k] = v
	}
	return c
}

func Parse(str string) (grid Grid, start Position, end Position) {
	str = strings.TrimSpace(str)

	treeCount := 0

	lines := strings.Split(str, "\n")
	for y, line := range lines {
		var row []GridPoint
		for x, point := range line {
			p := Path
			switch point {
			case '#':
				p = Tree
				treeCount++
			case '.':
				p = Path
			case '^':
				p = SlopeNorth
			case '>':
				p = SlopeEast
			case 'v':
				p = SlopeSouth
			case '<':
				p = SlopeWest
			case 'E':
				p = Path
				end = NewPosition(y, x)
			default:
				panic("invalid point")
			}

			if y == 0 && p == Path {
				start = NewPosition(y, x)
			}
			if y == len(lines)-1 && p == Path {
				end = NewPosition(y, x)
			}
			row = append(row, p)
		}
		grid = append(grid, row)
	}
	return grid, start, end
}

const TEST = `
#.#####################
#.......#########...###
#######.#########.#.###
###.....#.>.>.###.#.###
###v#####.#v#.###.#.###
###.>...#.#.#.....#...#
###v###.#.#.#########.#
###...#.#.#.......#...#
#####.#.#.#######.#.###
#.....#.#.#.......#...#
#.#####.#.#.#########v#
#.#...#...#...###...>.#
#.#.#v#######v###.###v#
#...#.>.#...>.>.#.###.#
#####v#.#.###v#.#.###.#
#.....#...#...#.#.#...#
#.#########.###.#.#.###
#...###...#...#...#.###
###.###.#.###v#####v###
#...#...#.#.>.>.#.>.###
#.###.###.#.###.#.#v###
#.....###...###...#...#
#####################.#`

const PUZZLE = `
#.###########################################################################################################################################
#...#.....###.....#...#...#...#...#...###...###.......###...#.....###.....#.....#...#####.....#.....#...#.......#...#...#...#.......#.......#
###.#.###.###.###.#.#.#.#.#.#.#.#.#.#.###.#.###.#####.###.#.#.###.###.###.#.###.#.#.#####.###.#.###.#.#.#.#####.#.#.#.#.#.#.#.#####.#.#####.#
#...#...#...#...#...#...#.#.#.#.#.#.#.#...#...#.....#.....#...#...#...#...#.#...#.#.###...#...#...#...#...#.....#.#.#.#.#.#.#.....#...#...#.#
#.#####.###.###.#########.#.#.#.#.#.#.#.#####.#####.###########.###.###.###.#.###.#.###.###.#####.#########.#####.#.#.#.#.#.#####.#####.#.#.#
#.#...#.###...#.#.........#.#.#.#.#.#.#...#...#...#.#...#...#...#...#...###.#.#...#...#...#.....#.....#.....###...#...#...#...#...#...#.#.#.#
#.#.#.#.#####.#.#.#########.#.#.#.#.#.###.#.###.#.#.#.#.#.#.#.###.###.#####.#.#.#####.###.#####.#####.#.#######.#############.#.###.#.#.#.#.#
#.#.#.#.#.....#.#.#...###...#.#.#.#.#.###.#.#...#.#...#.#.#...#...#...#...#.#.#...#...#...#.....#.....#...#...#.............#.#.#...#.#.#.#.#
#.#.#.#.#.#####.#.#.#.###.###.#.#.#.#.###.#.#.###.#####.#.#####.###.###.#.#.#.###.#.###.###.#####.#######.#.#.#############.#.#.#.###.#.#.#.#
#.#.#...#...#...#...#...#.#...#.#.#.#...#.#.#...#...###.#.>.>.#.#...###.#.#.#.....#...#...#.#...#.....#...#.#.#.......#.....#...#...#.#.#.#.#
#.#.#######.#.#########.#.#.###.#.#.###.#.#.###.###.###.###v#.#.#.#####.#.#.#########.###.#.#.#.#####.#.###.#.#.#####.#.###########.#.#.#.#.#
#...###...#.#.#.........#.#.#...#.#.#...#.#.###...#.#...###.#...#...#...#.#.......#...###.#.#.#.#...#.#.###.#.#...#...#.......#.....#.#.#...#
#######.#.#v#.#.#########.#.#.###.#.#.###.#.#####.#.#.#####.#######.#.###.#######.#.#####.#.#.#.#.#.#.#.###.#.###.#.#########.#.#####.#.#####
#.......#.#.>.#...###...#.#...#...#.#.#...#...#...#.#...#...#...#...#...#.#...###.#...#...#.#.#.#.#.#.#.#...#.>.>.#.....#...#.#.....#...#...#
#.#######.#v#####.###.#.#.#####.###.#.#.#####.#.###.###.#.###.#.#.#####.#.#.#.###.###.#.###.#.#.#.#.#.#.#.#####v#######.#.#.#.#####.#####.#.#
#.......#...#####...#.#.#...#...###.#.#.....#.#.###.#...#...#.#...#...#.#.#.#.>.>.#...#...#.#.#...#.#.#.#.#...#.....#...#.#...#...#.......#.#
#######.###########.#.#.###.#.#####.#.#####.#.#.###.#.#####.#.#####.#.#.#.#.###v###.#####.#.#.#####.#.#.#.#.#.#####.#.###.#####.#.#########.#
###...#.......#####.#.#...#.#...#...#...>.>.#.#.###...#...#.#...#...#.#.#.#.#...###...#...#...#.....#.#.#.#.#.......#...#.#.....#...........#
###.#.#######.#####.#.###.#.###.#.#######v###.#.#######.#.#.###.#.###.#.#.#.#.#######.#.#######.#####.#.#.#.###########.#.#.#################
#...#.........#.....#...#.#...#.#.#.......###.#.#.......#...###...###.#.#.#.#.......#.#...#.....#.....#...#...........#.#.#.................#
#.#############.#######.#.###.#.#.#.#########.#.#.###################.#.#.#.#######.#.###.#.#####.###################.#.#.#################.#
#.#...........#.....#...#.#...#...#.........#.#.#E......#...........#.#.#.#.#.......#.....#.......#.....#...###.......#.#.#.................#
#.#.#########.#####.#.###.#.###############.#.#.#######.#.#########.#.#.#.#.#.#####################.###.#.#.###.#######.#.#.#################
#...#.....#...#.....#...#.#...#.......#...#.#...#...###...#.....#...#...#...#.........#.....#...###...#.#.#...#.....###...#.................#
#####.###.#.###.#######.#.###.#.#####.#.#.#.#####.#.#######.###.#.###################.#.###.#.#.#####.#.#.###.#####.#######################.#
#...#...#.#...#.........#.#...#.#...#...#...###...#.....###...#...###...#.....#.......#...#...#.#...#.#.#...#.#...#...#...................#.#
#.#.###.#.###.###########.#.###.#.#.###########.#######.#####.#######.#.#.###.#.#########.#####.#.#.#.#.###.#.#.#.###.#.#################.#.#
#.#.....#.....#.........#...###...#...........#.#.....#.......#...###.#.#...#.#.........#.....#.#.#...#.....#...#.#...#.............#...#...#
#.#############.#######.#####################.#.#.###.#########.#.###.#.###.#.#########.#####.#.#.###############.#.###############.#.#.#####
#...............#.......#.............#.......#...###...........#...#.#.....#...........#.....#.#...............#.#.#...###...#...#...#...###
#################.#######.###########.#.###########################.#.###################.#####.###############.#.#.#.#.###.#.#.#.#######.###
#...............#.......#.#...#.....#...#...#...#...#...###...#...#.#.......#.....###...#...#...###...###.......#.#.#.#.....#...#.......#...#
#.#############.#######.#.#.#.#.###.#####.#.#.#.#.#.#.#.###.#.#.#.#.#######.#.###.###.#.###.#.#####.#.###v#######.#.#.#################.###.#
#...#...#.....#.#...#...#...#...###.....#.#...#.#.#...#.#...#...#...#...###...#...#...#...#.#...#...#...>.>.#...#...#...........#.....#.#...#
###.#.#.#.###.#.#.#.#.#################.#.#####.#.#####.#.###########.#.#######.###.#####.#.###.#.#######v#.#.#.###############.#.###.#.#.###
###...#...#...#...#...#...#...#...#.....#.....#.#.....#.#.....#.....#.#.###...#...#...#...#...#.#.#...###.#.#.#...#.....#.....#...#...#...###
###########.###########.#.#.#.#.#.#.#########.#.#####.#.#####.#.###.#.#.###.#.###.###.#.#####.#.#.#.#.###.#.#.###.#.###.#.###.#####.#########
#...........#.......###.#.#.#.#.#...#####...#.#.#...#.#.###...#.#...#.#...#.#.....#...#.#...#.#.#.#.#.....#...#...#...#.#...#.#...#.........#
#.###########.#####.###.#.#.#.#.#########.#.#.#.#.#.#.#.###v###.#.###.###.#.#######.###.#.#.#.#.#.#.###########.#####.#.###.#.#v#.#########.#
#...#...#...#.#.....#...#.#.#.#.....###...#.#.#.#.#.#.#...>.>.#.#.###.#...#.....#...###.#.#.#.#.#.#...........#...#...#...#.#.>.#...#.......#
###.#.#.#.#v#.#.#####.###.#.#.#####.###.###.#.#.#.#.#.#####v#.#.#.###.#.#######v#.#####.#.#.#.#.#.###########.###.#.#####.#.###v###.#.#######
###...#...#.>.#.#...#...#.#.#.#...#.#...#...#.#.#.#...#.....#...#.#...#...#...>.>.#...#...#...#...#...#####...#...#...###...###...#...#######
###########v###.#.#.###.#.#.#.#.#.#v#.###.###.#.#.#####.#########.#.#####.#.###v###.#.#############.#.#####.###.#####.###########.###########
#.....#.....#...#.#.#...#.#.#.#.#.>.>.###...#.#...#...#.........#.#.###...#.#...#...#.#...###.......#.......###.#...#.......#...#...........#
#.###.#.#####.###.#.#.###.#.#.#.###v#######.#.#####.#.#########.#.#.###.###.#.###.###.#.#.###.#################.#.#.#######.#.#.###########.#
#...#.#.#...#...#.#.#...#...#...###...###...#...#...#...........#.#.#...#...#...#...#.#.#...#.......#.........#...#.#.......#.#.#...........#
###.#.#.#.#.###.#.#.###.#############.###.#####.#.###############.#.#.###.#####.###.#.#.###.#######.#.#######.#####.#.#######.#.#.###########
#...#.#...#...#...#.....#...###.....#...#.#...#.#.......#.......#.#.#.....#...#...#.#...#...###.....#.#.......#...#.#...#...#.#.#.....#.....#
#.###.#######.###########.#.###.###.###.#.#.#.#.#######.#.#####.#.#.#######.#.###.#.#####.#####.#####.#.#######.#.#.###.#.#.#.#.#####.#.###.#
#...#...#.....###...#...#.#.#...###.....#.#.#...###...#...#.....#...#...#...#.....#...#...#...#.......#.........#.#.#...#.#.#.#.......#.#...#
###.###.#.#######.#.#.#.#.#.#.###########.#.#######.#.#####.#########.#.#.###########.#.###.#.###################.#.#.###.#.#.#########.#.###
###...#...#...###.#.#.#.#.#.#...#...#...#.#...#.....#...#...#...###...#.#.......###...#.....#.#.....#...###.......#.#...#.#...#.....#...#...#
#####.#####.#.###.#.#.#.#.#.###v#.#.#.#.#.###.#.#######.#.###.#.###.###.#######v###.#########.#.###.#.#.###.#######.###.#.#####.###.#.#####.#
#####.....#.#...#.#.#.#.#.#...>.>.#...#.#.#...#.......#.#...#.#...#...#.....#.>.>.#.#.........#...#.#.#.#...#.....#.....#.....#.#...#.#.....#
#########.#.###.#.#.#.#.#.#####v#######.#.#.#########.#.###.#.###.###.#####.#.#v#.#.#.###########.#.#.#.#.###.###.###########.#.#.###.#.#####
#.........#...#.#.#.#.#.#.#.....#.....#.#...#.........#.....#...#...#.#.....#.#.#...#.......#...#.#...#.#.....#...#...###...#...#.....#.....#
#.###########.#.#.#.#.#.#.#.#####.###.#.#####.#################.###.#.#.#####.#.###########.#.#.#.#####.#######.###.#.###.#.###############.#
#.........#...#...#...#...#...###...#...#...#...#...........#...#...#.#.......#...#.........#.#.#.....#.###.....#...#...#.#.#...............#
#########.#.#################.#####.#####.#.###.#.#########.#.###.###.###########.#.#########.#.#####.#.###.#####.#####.#.#.#.###############
#.........#.......#.......###.#.....#.....#...#.#.#.........#...#.#...#.....#.....#...#...###.#.....#.#.#...#...#...#...#.#.#.....#...#.....#
#.###############.#.#####.###.#.#####.#######.#.#.#.###########.#.#.###.###.#.#######.#.#.###.#####.#.#.#.###.#.###.#.###.#.#####v#.#.#.###.#
#...#.....#...#...#.....#.....#...#...#.......#...#.......###...#.#...#...#...###...#.#.#...#.#.....#.#.#...#.#.#...#.#...#.#...>.#.#.#.#...#
###.#.###v#.#.#.#######.#########.#.###.#################.###.###.###.###.#######.#.#.#.###.#.#.#####.#.###v#.#.#.###.#.###.#.###v#.#.#.#.###
#...#...#.>.#...#...###...#...###.#...#...#...#.....#.....#...###...#.###.........#.#...###.#.#.#...#.#...>.>.#.#.#...#...#.#.#...#.#...#...#
#.#####.#v#######.#.#####.#.#.###.###.###.#.#.#.###.#.#####.#######.#.#############.#######.#.#.#.#.#.#####v###.#.#.#####.#.#.#.###.#######.#
#.......#.......#.#.....#...#...#.###.#...#.#.#...#.#.###...#...###...#.......#...#.#.......#.#.#.#...#...#...#.#.#...#...#...#...#.#.......#
###############.#.#####.#######.#.###.#.###.#.###.#.#v###.###.#.#######.#####.#.#.#.#.#######.#.#.#####.#.###.#.#.###.#.#########.#.#.#######
###...#.........#.#...#.#.......#...#.#...#.#...#.#.>.>...#...#.#...#...#...#...#...#.......#.#.#...#...#.....#...###...#.........#.#.#...###
###.#.#.#########.#.#.#.#.#########.#.###.#.###.#.###v#####.###.#.#.#.###.#.###############.#.#.###.#.###################.#########.#.#.#.###
#...#...#...#...#.#.#...#.......#...#.###.#.###.#...#...###...#.#.#.#.....#.......#####...#...#.....#.........#...###...#...........#...#...#
#.#######.#.#.#.#.#.###########.#.###.###.#.###.###.###.#####.#.#.#.#############.#####.#.###################.#.#.###.#.###################.#
#.......#.#...#...#...#.........#...#...#.#.###.#...###...#...#...#...#.........#...#...#.#...###...#.....#...#.#.#...#...###...#...#...#...#
#######.#.###########.#.###########.###.#.#.###.#.#######.#.#########.#.#######.###.#.###.#.#.###.#.#.###.#.###.#.#.#####.###.#.#.#.#.#.#.###
#.......#.#...........#.........###.....#.#.#...#.....###.#.#.........#.......#.#...#...#.#.#.###.#.#...#...#...#.#.#.....#...#...#...#...###
#.#######.#v###################.#########.#.#.#######.###.#.#.###############.#.#.#####.#.#.#.###.#.###v#####.###.#.#.#####.#################
#.........#.>...#...#...#...#...#.....###...#...#...#.#...#.#.......#.....#...#...#.....#...#.....#...>.>.###...#.#.#.#...#.................#
###########v###.#.#.#.#.#.#.#.###.###.#########.#.#.#.#.###.#######.#.###.#.#######.###################v#.#####.#.#.#.#.#.#################.#
#...........#...#.#.#.#.#.#.#.###...#...#...###...#...#.....#.......#...#...#.....#.............#.....#.#...#...#.#.#...#.#...###...#.......#
#.###########.###.#.#.#.#.#.#v#####.###.#.#.#################.#########.#####.###.#############.#.###.#.###.#.###.#.#####.#.#.###.#.#.#######
#...........#...#.#.#.#.#.#.>.>.....#...#.#...#.......#.......#...#####.....#.#...###...#...#...#...#.#...#...###.#.#.....#.#...#.#...#...###
###########.###.#.#.#.#.#.###v#######.###.###.#.#####.#.#######.#.#########.#.#.#####.#.#.#.#.#####.#.###.#######.#.#.#####.###.#.#####.#.###
#####...###...#.#.#.#.#.#.#...###...#...#.#...#.....#.#...#...#.#...###...#.#.#.#.....#...#...#...#.#.....###.....#.#.#.....#...#.......#...#
#####.#.#####.#.#.#.#.#.#.#.#####.#.###.#.#.#######.#.###.#.#.#.###.###.#.#.#.#.#.#############.#.#.#########.#####.#.#.#####.#############.#
###...#.......#...#...#.#.#...#...#.###...#.#...#...#.###...#...#...#...#.#.#.#.#.........###...#.#.........#...#...#.#.#.....#.........#...#
###.###################.#.###.#.###.#######.#.#.#.###.###########.###.###.#v#.#.#########.###.###.#########.###.#.###.#.#.#####.#######.#.###
#...#.......#...#...###...###.#.###.....#...#.#.#...#.#...###...#...#...#.>.>.#...#.....#...#...#.....#...#.#...#...#...#.....#.......#...###
#.###.#####.#.#.#.#.#########.#.#######.#.###.#.###.#.#.#.###.#.###v###.###v#####.#.###.###.###.#####.#.#.#.#.#####.#########.#######v#######
#.....#####...#...#...#...#...#.#.......#...#.#...#.#.#.#...#.#.#.>.>.#...#.....#...###...#.#...#...#...#...#.......#.........#...#.>.#...###
#####################.#.#.#.###.#.#########.#.###.#.#.#.###.#.#.#.#v#.###.#####.#########.#.#.###.#.#################.#########.#.#.#v#.#.###
#...............#.....#.#.#.#...#.......#...#...#.#.#.#...#.#.#...#.#.#...#.....#...#...#...#...#.#.................#.....#...#.#.#.#...#...#
#.#############.#.#####.#.#.#.#########.#.#####.#.#.#.###.#.#.#####.#.#.###.#####.#.#.#.#######.#.#################.#####.#.#.#.#.#.#######.#
#.#...........#.#.#.....#.#...#.........#.....#.#.#.#...#.#.#.#.....#...###.......#...#.#.....#...#.................#...#...#...#...#.....#.#
#.#.#########.#.#.#.#####.#####.#############.#.#.#.###.#.#.#.#.#######################.#.###.#####.#################.#.#############.###.#.#
#.#.#.........#...#.....#.#...#.#.....###...#...#...###...#...#.........#...........#...#...#.......#...###...###...#.#.#...........#...#...#
#.#.#.#################.#.#.#.#.#.###.###.#.###########################.#.#########.#.#####.#########.#.###.#.###.#.#.#.#.#########.###.#####
#.#.#...#...#####...#...#...#.#.#...#...#.#.#...#...#...#...............#.........#...#...#...........#.#...#...#.#.#.#.#.......#...###.....#
#.#.###.#.#.#####.#.#.#######.#.###.###.#.#.#.#.#.#.#.#.#.#######################.#####.#.#############.#.#####.#.#.#.#.#######.#.#########.#
#...###...#...###.#.#.#.......#.....#...#.#.#.#.#.#...#.#...............#.........#...#.#.###...#.......#...#...#.#.#.#.#...###.#.#...#...#.#
#############.###.#.#.#.#############v###.#.#.#.#.#####.###############.#.#########.#.#.#.###.#.#.#########.#.###.#.#.#.#.#.###.#.#.#.#v#.#.#
#...#.........#...#...#.#...#...#...>.>.#.#.#.#.#.#.....#...#...###.....#.#...#...#.#.#.#...#.#.#...#...#...#...#.#.#.#.#.#.#...#.#.#.>.#...#
#.#.#.#########.#######.#.#.#.#.#.###v#.#.#.#.#.#.#.#####.#.#.#.###v#####.#.#.#.#.#.#.#.###.#.#.###v#.#.#.#####.#.#.#.#.#.#.#.###.#.###v#####
#.#...#.....###.....###...#.#.#...#...#...#.#.#.#.#.#...#.#.#.#...>.>.###...#...#...#.#...#.#.#.#.>.>.#...###...#.#...#...#.#.###.#.#...#...#
#.#####.###v#######.#######.#.#####.#######.#.#.#.#.#.#.#.#.#.#####v#.###############.###.#.#.#.#.#v#########.###.#########.#.###.#.#.###.#.#
#.#...#...#.>.....#.......#.#.#.....#...#...#.#.#.#...#...#...#...#.#.#...#...#.......#...#.#.#...#.........#...#.....#.....#...#...#.....#.#
#.#.#.###.#v#####.#######.#.#.#.#####.#.#.###.#.#.#############.#.#.#.#.#.#.#.#.#######.###.#.#############.###.#####.#.#######.###########.#
#...#.....#...###.#.....#.#.#.#.......#.#...#.#.#...###...###...#.#.#.#.#.#.#.#.#...#...#...#...#...........###.#...#.#.#...#...#...........#
#############.###.#.###.#.#.#.#########.###.#.#.###.###.#.###.###.#.#.#.#.#.#.#v#.#.#.###.#####.#.#############.#.#.#.#.#.#.#.###.###########
#...........#...#.#...#.#.#...#.........###...#.#...#...#.....###.#.#.#.#.#.#.>.>.#.#...#.#.....#.............#...#.#.#.#.#...###.....###...#
#.#########.###.#.###.#.#.#####.###############.#.###.###########.#.#.#.#.#.###v###.###.#.#.#################.#####.#.#.#.###########.###.#.#
#.........#.#...#.#...#...#...#.............#...#.#...#.......###.#.#.#.#...###...#.#...#.#.#.................#...#...#...###...#...#.....#.#
#########.#.#.###.#.#######.#.#############.#.###.#.###.#####.###.#.#.#.#########.#.#.###.#.#.#################.#.###########.#.#.#.#######.#
###...#...#...###...###.....#...............#...#.#.....###...#...#.#.#...#.......#...###...#.#.......#...###...#.#.....###...#...#.......#.#
###.#.#.###############.#######################.#.#########.###.###.#.###.#.#################.#.#####.#.#.###.###.#.###.###.#############.#.#
###.#.#.........#.....#.#...#...#.............#.#.#.........###...#.#.#...#.#.......###...###...#.....#.#.....#...#...#...#.#...........#...#
###.#.#########.#.###.#.#.#.#.#.#.###########.#.#.#.#############.#.#.#.###.#.#####.###.#.#######.#####.#######.#####.###.#.#.#########.#####
#...#...........#.#...#...#...#...#...........#...#...#...#...###...#.#...#...#...#...#.#.#.....#.#...#.#.......###...#...#...#.........#...#
#.###############.#.###############.#################.#.#.#.#.#######.###.#####.#.###.#.#.#.###.#.#.#.#.#.#########.###.#######.#########.#.#
#.#...#...........#.....#...###...#.....#.....#...###...#...#.....###.#...#.....#.....#.#...#...#...#...#.....#...#...#.###...#.......###.#.#
#.#.#.#.###############.#.#.###.#.#####.#.###.#.#.###############.###.#.###.###########.#####.###############.#.#.###.#.###.#.#######.###.#.#
#.#.#.#.#...............#.#.#...#.....#...#...#.#.#...#.....#...#...#.#...#.............#.....###...###...#...#.#.....#.#...#...#...#.....#.#
#.#.#.#.#.###############.#.#.#######.#####.###.#.#.#.#.###.#.#.###.#.###.###############.#######.#.###.#.#.###.#######.#.#####.#.#.#######.#
#...#...#.....#...........#.#...#...#.......###.#.#.#...###...#.....#.....#...#...#.....#.....#...#.....#.#.....#.....#.#.#...#...#.........#
#############.#.###########.###.#.#.###########.#.#.#######################.#.#.#.#.###.#####.#.#########.#######.###.#.#.#.#.###############
###...#...###...#...#.......###...#...........#.#.#.............#...#...#...#...#...###.......#.....#...#.......#...#.#.#...#...........#...#
###.#.#.#.#######.#.#.#######################.#.#.#############.#.#.#.#.#.#########################.#.#.#######.###.#.#.###############.#.#.#
#...#...#.........#...###...#...#.............#.#...............#.#...#.#.#.....#.....#.........#...#.#.......#.#...#...###.............#.#.#
#.#######################.#.#.#.#.#############.#################.#####.#.#.###.#.###.#.#######.#.###.#######.#.#.#########.#############.#.#
#...................#...#.#.#.#.#.......#.....#...#.....#...#...#.....#.#...###...#...#...#.....#...#.#.......#...#...#...#...............#.#
###################.#.#.#.#.#.#.#######.#.###.###.#.###.#.#.#.#.#####.#.###########.#####.#.#######.#.#.###########.#.#.#.#################.#
#.................#.#.#.#.#.#.#.###.....#...#.###...#...#.#.#.#.#...#.#...#...#.....#.....#...#####...#.......#.....#.#.#.#...#.............#
#.###############.#.#.#.#.#.#.#.###v#######.#.#######.###.#.#.#.#.#.#.###.#.#.#.#####.#######.###############.#.#####.#.#.#.#.#.#############
#.............###...#.#.#.#.#.#.#.>.>...###.#.#...###.###.#.#.#.#.#.#.#...#.#.#.#...#.......#...#...#...#.....#.....#.#.#...#.#.............#
#############.#######.#.#.#.#.#.#.#####.###.#.#.#.###v###.#.#.#.#.#.#.#.###.#.#v#.#.#######.###.#.#.#.#.#.#########.#.#.#####.#############.#
#.............#...#...#.#.#.#.#.#...###.#...#.#.#...>.>.#.#.#.#.#.#.#.#...#.#.>.>.#...#...#.#...#.#.#.#.#...###...#.#.#.#.....#...#.........#
#.#############.#.#.###.#.#.#.#.###.###.#.###.#.#######.#.#.#.#.#.#.#.###.#.#########.#.#.#.#.###.#.#.#.###v###.#.#.#.#.#.#####.#.#.#########
#...#.........#.#.#.###...#...#...#...#.#.#...#.......#...#.#.#.#.#.#...#.#.#.........#.#...#.#...#.#.#.#.>.>.#.#.#.#.#.#.#...#.#.#...#.....#
###.#.#######.#.#.#.#############.###.#.#.#.#########.#####.#.#.#.#.###.#.#.#.#########.#####.#.###.#.#.#.###.#.#.#.#.#.#.#.#.#.#.###v#.###.#
###.#.#.......#.#.#.............#...#.#.#.#.....#...#...#...#.#.#.#.#...#.#.#...#...#...#.....#...#.#.#.#.#...#.#.#.#.#.#.#.#.#.#.#.>.#.#...#
###.#.#.#######.#.#############.###.#.#.#.#####.#.#.###.#.###.#.#.#.#.###.#.###.#.#.#.###.#######.#.#.#.#.#.###.#.#.#.#.#.#.#.#.#.#.#v#.#.###
###...#.........#...............###...#...#####...#.....#.....#...#...###...###...#...###.........#...#...#.....#...#...#...#...#...#...#...#
###########################################################################################################################################.#`
